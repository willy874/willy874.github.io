# Console Platform - 錯誤代碼規格書

## 概述

本文件統一定義 Console Platform 系統中所有功能模組使用的錯誤代碼，以確保錯誤處理的一致性和可維護性。

## 錯誤代碼結構

錯誤代碼採用以下命名規則：

- **COMMON_XXX**: 通用錯誤代碼，適用於所有功能模組
- **模組名稱\_XXX**: 特定模組的錯誤代碼

## 通用錯誤代碼 (COMMON)

| Error Code | HTTP Status | Message                  | Trigger Event    | Handler Event                |
| ---------- | ----------- | ------------------------ | ---------------- | ---------------------------- |
| COMMON_001 | 403         | 權限不足，無法存取此功能 | 使用者權限不足   | 隱藏相關功能按鈕             |
| COMMON_002 | 404         | 查無符合條件的資料       | 搜尋無結果       | 顯示空狀態頁面，建議修改條件 |
| COMMON_003 | 429         | 操作過於頻繁，請稍後再試 | 短時間內大量操作 | 跳出提示                     |
| COMMON_004 | 500         | 載入資料失敗             | 資料庫查詢異常   | 提供重新整理按鈕             |

---

## 認證相關 (AUTH)

| Error Code | HTTP Status | Message                            | Trigger Event  | Handler Event        |
| ---------- | ----------- | ---------------------------------- | -------------- | -------------------- |
| AUTH_001   | 401         | 帳號或密碼錯誤                     | 登入憑證無效   | 提示重新輸入         |
| AUTH_002   | 423         | 帳號已鎖定，請於 X 分鐘後再試      | 多次登入失敗   | 顯示鎖定時間         |
| AUTH_003   | 403         | 帳號已停用，請聯繫管理員           | 帳號被停用     | 顯示聯絡資訊         |
| AUTH_004   | 401         | 驗證碼錯誤，剩餘 X 次機會          | 2FA 驗證失敗   | 顯示剩餘機會         |
| AUTH_005   | 401         | 驗證失敗次數過多，請重新登入       | 2FA 多次失敗   | 返回登入頁           |
| AUTH_006   | 401         | 驗證碼已過期，請重新取得           | 2FA 驗證碼過期 | 提供重新取得選項     |
| AUTH_007   | 403         | 此帳號尚未啟用，請先完成信箱驗證   | 帳號未啟用     | 提供啟用流程         |
| AUTH_008   | 400         | 無法識別裝置，請確認瀏覽器設定     | 裝置識別失敗   | 提供設定指引         |
| AUTH_009   | 403         | 安全驗證失敗，請重新整理頁面       | CSRF 驗證失敗  | 刷新頁面             |
| AUTH_010   | 429         | 登入嘗試過於頻繁，請稍後再試       | 頻率限制觸發   | 顯示等待時間         |
| AUTH_011   | 500         | 系統錯誤，請稍後再試或聯繫管理員   | 系統異常       | 提供技術支援聯絡方式 |
| AUTH_012   | 401         | Session 已過期，請重新登入         | 會話過期       | 跳轉登入頁           |
| AUTH_013   | 403         | 偵測到異常登入，請完成額外安全驗證 | 異常登入檢測   | 導向額外驗證流程     |

---

## 密碼重設 (RESET)

| Error Code | HTTP Status | Message                              | Trigger Event      | Handler Event    |
| ---------- | ----------- | ------------------------------------ | ------------------ | ---------------- |
| RESET_001  | 400         | 重設連結無效或已過期，請重新申請     | 連結失效           | 提供重新申請選項 |
| RESET_002  | 400         | 密碼不符合安全要求                   | 密碼強度不足       | 顯示密碼規則     |
| RESET_003  | 400         | 兩次輸入的密碼不一致                 | 密碼確認不符       | 提示重新輸入     |
| RESET_004  | 400         | 新密碼不可與舊密碼相同               | 密碼重複使用       | 提示使用新密碼   |
| RESET_005  | 401         | 驗證碼錯誤，請重新輸入               | 驗證碼無效         | 提示重新輸入     |
| RESET_006  | 400         | 驗證失敗次數過多，請重新申請密碼重設 | 多次驗證失敗       | 導向重新申請流程 |
| RESET_007  | 429         | 重設請求過於頻繁，請稍後再試         | 頻率限制           | 顯示等待時間     |
| RESET_008  | 400         | Email 格式錯誤                       | 電子郵件格式不正確 | 顯示正確格式範例 |
| RESET_009  | 500         | 信件發送失敗，請稍後再試             | 郵件服務異常       | 提供重試選項     |

---

## 帳號設定 (SETUP)

| Error Code | HTTP Status | Message                           | Trigger Event | Handler Event    |
| ---------- | ----------- | --------------------------------- | ------------- | ---------------- |
| SETUP_001  | 400         | 啟用連結無效或已過期              | 連結失效      | 提供重新取得選項 |
| SETUP_002  | 400         | 密碼不符合安全要求                | 密碼強度不足  | 顯示密碼規則     |
| SETUP_003  | 400         | 兩次輸入的密碼不一致              | 密碼確認不符  | 提示重新輸入     |
| SETUP_004  | 400         | 驗證碼錯誤，請重新輸入            | 2FA 驗證失敗  | 提示重新輸入     |
| SETUP_005  | 400         | 驗證失敗次數過多，請重新生成 2FA  | 多次驗證失敗  | 重新生成 2FA     |
| SETUP_006  | 400         | 請先保存備用代碼再繼續            | 備用碼未保存  | 提示保存備用碼   |
| SETUP_007  | 409         | 此帳號已完成啟用                  | 帳號已啟用    | 導向登入頁       |
| SETUP_008  | 429         | 操作過於頻繁，請稍後再試          | 頻率限制      | 顯示等待時間     |
| SETUP_009  | 500         | 生成 QR Code 失敗，請重新整理頁面 | QR 碼生成失敗 | 刷新頁面         |

---

## 登出相關 (LOGOUT)

| Error Code | HTTP Status | Message          | Trigger Event | Handler Event |
| ---------- | ----------- | ---------------- | ------------- | ------------- |
| LOGOUT_001 | 401         | Session 已失效   | 會話無效      | 清除本地狀態  |
| LOGOUT_002 | 500         | 登出失敗，請重試 | 登出操作失敗  | 提供重試選項  |
| LOGOUT_003 | 429         | 操作過於頻繁     | 頻率限制      | 限制操作頻率  |

---

## 使用者管理 (USER)

| Error Code | HTTP Status | Message                  | Trigger Event      | Handler Event    |
| ---------- | ----------- | ------------------------ | ------------------ | ---------------- |
| USER_001   | 403         | 權限不足，無法存取此功能 | 使用者權限不足     | 隱藏相關功能     |
| USER_002   | 400         | 搜尋條件格式錯誤         | 搜尋參數不正確     | 顯示格式要求     |
| USER_003   | 404         | 查無符合條件的使用者     | 搜尋無結果         | 顯示空狀態頁面   |
| USER_004   | 400         | 使用者 ID 格式錯誤       | ID 格式不正確      | 顯示正確格式     |
| USER_005   | 403         | 無法對此使用者執行該操作 | 操作權限不足       | 顯示權限限制說明 |
| USER_006   | 429         | 操作過於頻繁，請稍後再試 | 頻率限制           | 顯示等待時間     |
| USER_007   | 500         | 載入使用者列表失敗       | 資料庫異常         | 提供重新整理按鈕 |
| USER_008   | 400         | 欄位驗證錯誤             | 欄位不符合驗證條件 | 顯示具體錯誤訊息 |

---

## 使用者創建 (CREATE)

| Error Code | HTTP Status | Message                        | Trigger Event    | Handler Event    |
| ---------- | ----------- | ------------------------------ | ---------------- | ---------------- |
| CREATE_001 | 400         | 帳號已存在，請使用其他帳號名稱 | 帳號重複         | 提示修改帳號     |
| CREATE_002 | 400         | Email 已被其他使用者使用       | Email 重複       | 提示修改 Email   |
| CREATE_003 | 403         | 權限不足，無法指派此角色       | 角色權限不足     | 調整角色選項     |
| CREATE_004 | 400         | 使用者名稱長度不符合規定       | 名稱長度不正確   | 顯示長度要求     |
| CREATE_005 | 400         | 使用者名稱包含無效字元         | 名稱字元不符     | 顯示允許字元     |
| CREATE_006 | 400         | 必填欄位不完整                 | 必填欄位空白     | 標示必填欄位     |
| CREATE_007 | 400         | 部門選擇無效                   | 部門不存在       | 更新部門選項     |
| CREATE_008 | 400         | 職位選擇無效                   | 職位不存在       | 更新職位選項     |
| CREATE_009 | 413         | 上傳的圖片檔案過大             | 檔案大小超過限制 | 提示檔案大小限制 |
| CREATE_010 | 500         | 建立使用者失敗，請稍後再試     | 建立操作失敗     | 提供重試選項     |
| CREATE_011 | 429         | 建立使用者過於頻繁，請稍後再試 | 頻率限制         | 顯示等待時間     |
| CREATE_012 | 400         | 密碼不符合規定                 | 密碼強度不足     | 顯示密碼要求     |

---

## 使用者編輯 (EDIT)

| Error Code | HTTP Status | Message                                  | Trigger Event | Handler Event      |
| ---------- | ----------- | ---------------------------------------- | ------------- | ------------------ |
| EDIT_001   | 404         | 找不到指定的使用者                       | 使用者不存在  | 返回使用者列表     |
| EDIT_002   | 403         | 權限不足，無法編輯此使用者               | 編輯權限不足  | 隱藏編輯功能       |
| EDIT_003   | 400         | Email 已被其他使用者使用                 | Email 重複    | 提示修改 Email     |
| EDIT_004   | 400         | 無法指派此角色，權限等級過高             | 角色權限不符  | 調整角色選項       |
| EDIT_005   | 409         | 使用者資料已被他人修改，請重新載入       | 資料衝突      | 刷新頁面           |
| EDIT_006   | 500         | 儲存個人檔案失敗，請重試                 | 儲存操作失敗  | 提供重試選項       |
| EDIT_007   | 429         | 修改過於頻繁，請稍後再試                 | 頻率限制      | 顯示等待時間       |
| EDIT_008   | 400         | 使用者狀態不允許編輯                     | 狀態限制      | 顯示狀態說明       |
| EDIT_009   | 400         | 不可移除所有角色，使用者至少需要一個角色 | 角色移除限制  | 保留至少一個角色   |
| EDIT_010   | 429         | 編輯過於頻繁，請稍後再試                 | 頻率限制      | 顯示等待時間       |
| EDIT_011   | 422         | 資料驗證失敗，請檢查輸入內容             | 資料驗證錯誤  | 顯示驗證錯誤詳情   |
| EDIT_012   | 403         | 無法編輯自己的權限，請聯繫其他管理員     | 自我編輯限制  | 提示聯絡其他管理員 |

---

## 使用者檢視 (VIEW)

| Error Code | HTTP Status | Message                        | Trigger Event | Handler Event  |
| ---------- | ----------- | ------------------------------ | ------------- | -------------- |
| VIEW_001   | 404         | 找不到指定的使用者             | 使用者不存在  | 返回使用者列表 |
| VIEW_002   | 403         | 權限不足，無法檢視此使用者資訊 | 檢視權限不足  | 隱藏敏感資訊   |
| VIEW_003   | 403         | 無法檢視此使用者的詳細權限     | 權限檢視限制  | 隱藏權限詳情   |
| VIEW_004   | 500         | 載入使用者資訊失敗，請重試     | 載入操作失敗  | 提供重試選項   |
| VIEW_005   | 429         | 存取過於頻繁，請稍後再試       | 頻率限制      | 顯示等待時間   |
| VIEW_006   | 400         | 使用者 ID 格式錯誤             | ID 格式不正確 | 顯示正確格式   |

---

## 權限管理 (PERM)

| Error Code | HTTP Status | Message                          | Trigger Event      | Handler Event    |
| ---------- | ----------- | -------------------------------- | ------------------ | ---------------- |
| PERM_001   | 400         | 權限代碼格式錯誤或已存在         | 權限代碼重複或無效 | 提示修改權限代碼 |
| PERM_002   | 400         | 權限依賴關係形成循環，請重新設定 | 依賴關係錯誤       | 調整依賴關係     |
| PERM_003   | 400         | 不可刪除系統預設權限             | 嘗試刪除系統權限   | 禁止刪除操作     |
| PERM_004   | 400         | 此權限正被角色使用中，無法刪除   | 權限被使用         | 先移除權限關聯   |
| PERM_005   | 400         | 權限層級設定錯誤                 | 層級設定不正確     | 顯示層級要求     |
| PERM_006   | 403         | 權限不足，無法建立此等級的權限   | 權限等級不足       | 調整權限等級     |
| PERM_007   | 400         | 互斥權限設定衝突                 | 權限衝突           | 解決權限衝突     |
| PERM_008   | 429         | 權限操作過於頻繁，請稍後再試     | 頻率限制           | 顯示等待時間     |
| PERM_009   | 500         | 權限架構計算失敗，請稍後再試     | 計算錯誤           | 提供重試選項     |

---

## 個人檔案 (PROF)

| Error Code | HTTP Status | Message                  | Trigger Event | Handler Event |
| ---------- | ----------- | ------------------------ | ------------- | ------------- |
| PROF_001   | 401         | 身份驗證失敗，請重新登入 | 身份驗證失敗  | 跳轉登入頁    |
| PROF_002   | 500         | 載入個人檔案失敗，請重試 | 載入失敗      | 提供重試選項  |
| PROF_003   | 429         | 存取過於頻繁，請稍後再試 | 頻率限制      | 顯示等待時間  |

---

## 角色管理 (ROLE)

| Error Code | HTTP Status | Message                            | Trigger Event      | Handler Event    |
| ---------- | ----------- | ---------------------------------- | ------------------ | ---------------- |
| ROLE_001   | 400         | 角色名稱已存在，請使用其他名稱     | 角色名稱重複       | 提示修改角色名稱 |
| ROLE_002   | 403         | 權限不足，無法建立此權限等級的角色 | 權限等級不足       | 調整權限等級     |
| ROLE_003   | 400         | 不可刪除系統預設角色               | 嘗試刪除系統角色   | 禁止刪除操作     |
| ROLE_004   | 400         | 此角色正被使用中，無法刪除         | 角色被使用         | 先移除角色關聯   |
| ROLE_005   | 400         | 權限配置衝突，請檢查權限組合       | 權限配置錯誤       | 檢查權限組合     |
| ROLE_006   | 403         | 無法編輯 Super Admin 角色          | 嘗試編輯超級管理員 | 禁止編輯操作     |
| ROLE_007   | 429         | 角色操作過於頻繁，請稍後再試       | 頻率限制           | 顯示等待時間     |
| ROLE_008   | 500         | 角色權限計算失敗，請稍後再試       | 權限計算錯誤       | 提供重試選項     |

---

## 註冊相關 (REG)

| Error Code | HTTP Status | Message                          | Trigger Event | Handler Event      |
| ---------- | ----------- | -------------------------------- | ------------- | ------------------ |
| REG_001    | 400         | 帳號已存在                       | 帳號重複      | 提示修改帳號       |
| REG_002    | 400         | Email 已被使用                   | Email 重複    | 提示修改 Email     |
| REG_003    | 403         | 權限不足，無法建立此角色的使用者 | 角色權限不足  | 調整角色選項       |
| REG_004    | 400         | 啟用連結無效或已過期             | 連結失效      | 提供重新註冊選項   |
| REG_005    | 400         | 此帳號已啟用，請直接登入         | 帳號已啟用    | 導向登入頁         |
| REG_006    | 429         | 重新寄送過於頻繁，請稍後再試     | 頻率限制      | 顯示等待時間       |
| REG_007    | 500         | 信件發送失敗，請稍後再試         | 郵件服務異常  | 提供重試選項       |
| REG_008    | 403         | 此帳號已被停用，請聯繫管理員     | 帳號被停用    | 顯示聯絡資訊       |
| REG_009    | 400         | 無法建立帳號，已達授權數量上限   | 授權數量限制  | 聯絡管理員擴增授權 |

---

## 成員管理 (MEMBER)

| Error Code | HTTP Status | Message              | Trigger Event          | Handler Event    |
| ---------- | ----------- | -------------------- | ---------------------- | ---------------- |
| MEMBER_001 | 400         | 欄位驗證錯誤         | 欄位不符合基本驗證條件 | 顯示具體錯誤欄位 |
| MEMBER_002 | 400         | 搜尋條件格式錯誤     | 搜尋參數格式不正確     |                  |
| MEMBER_003 | 400         | 操作狀態錯誤         | 成員當前狀態不符合條件 | 顯示狀態限制說明 |
| MEMBER_004 | 400         | 帳號已被其他成員使用 | 帳號重複檢查失敗       | 提示修改帳號     |
| MEMBER_005 | 400         | 無法編輯此成員       | 成員狀態不允許編輯     | 顯示狀態限制說明 |
| MEMBER_006 | 400         | 重設密碼失敗         | 密碼重設過程異常       | 提供重試選項     |

---

## 應用程式管理 (APP)

| Error Code | HTTP Status | Message                        | Trigger Event                    | Handler Event        |
| ---------- | ----------- | ------------------------------ | -------------------------------- | -------------------- |
| APP_001    | 400         | 欄位驗證錯誤                   | 欄位不符合基本驗證條件           | 顯示具體欄位錯誤訊息 |
| APP_002    | 400         | 搜尋條件格式錯誤               | 搜尋參數格式不正確               |                      |
| APP_003    | 400         | 操作狀態錯誤                   | 應用程式當前狀態不符合條件       | 重新整理頁面更新狀態 |
| APP_004    | 400         | 應用程式名稱不可為空           | 名稱欄位為空                     | 標示必填欄位         |
| APP_005    | 400         | 應用程式名稱長度不可超過 50 字 | 名稱欄位超過長度限制             | 顯示字數限制提示     |
| APP_006    | 400         | 描述長度不可超過 1000 字       | 描述欄位超過長度限制             | 顯示字數限制提示     |
| APP_007    | 400         | 服務 IP 格式錯誤               | IP 格式不正確                    | 顯示正確格式說明     |
| APP_008    | 400         | 服務 Port 必須為數字           | Port 不是有效數字                | 顯示數字格式要求     |
| APP_009    | 400         | 虛擬網域 Host 格式錯誤         | 虛擬網域格式不正確               | 顯示正確格式說明     |
| APP_010    | 400         | 虛擬網域 Port 必須為數字       | 虛擬網域 Port 不是有效數字       | 顯示數字格式要求     |
| APP_011    | 409         | 虛擬網域 Host 和 Port 組合重複 | 虛擬網域組合已存在於其他應用程式 | 提示修改虛擬網域設定 |
| APP_012    | 500         | 停用應用程式失敗               | 停用操作執行失敗                 | 提供重試按鈕         |
| APP_013    | 500         | 啟用應用程式失敗               | 啟用操作執行失敗                 | 提供重試按鈕         |
| APP_014    | 500         | 刪除應用程式失敗               | 刪除操作執行失敗                 | 提供重試按鈕         |
| APP_015    | 500         | 更新應用程式失敗               | 資料庫更新操作異常               | 提供重試按鈕         |

---

## 組織管理 (ORG)

| Error Code | HTTP Status | Message                    | Trigger Event          | Handler Event          |
| ---------- | ----------- | -------------------------- | ---------------------- | ---------------------- |
| ORG_001    | 400         | 欄位驗證錯誤               | 欄位不符合基本驗證條件 |                        |
| ORG_002    | 400         | 搜尋條件格式錯誤           | 搜尋參數格式不正確     |                        |
| ORG_003    | 400         | 操作狀態錯誤               | 組織當前狀態不符合條件 | 顯示狀態限制說明       |
| ORG_004    | 400         | 組織名稱不可為空           | 名稱欄位為空           | 標示必填欄位           |
| ORG_005    | 400         | 組織名稱長度不可超過 50 字 | 名稱欄位超過長度限制   | 顯示字數限制提示       |
| ORG_006    | 400         | 描述長度不可超過 500 字    | 描述欄位超過長度限制   | 顯示字數限制提示       |
| ORG_007    | 409         | 組織名稱重複               | 組織名稱已存在         | 提示修改組織名稱       |
| ORG_008    | 500         | 停用組織失敗               | 停用操作執行失敗       | 提供重試按鈕           |
| ORG_009    | 500         | 刪除組織失敗               | 刪除操作執行失敗       | 提供重試按鈕           |
| ORG_010    | 400         | 無法刪除含有成員的組織     | 組織內仍有成員         | 提示先移除所有成員     |
| ORG_011    | 400         | 無法刪除含有應用程式的組織 | 組織內仍有應用程式關聯 | 提示先移除所有應用程式 |
| ORG_012    | 500         | 更新組織失敗               | 資料庫更新操作異常     | 提供重試按鈕           |
| ORG_013    | 400         | 成員已在組織中             | 嘗試添加重複成員       | 提示成員已存在         |
| ORG_014    | 404         | 查無此成員                 | 成員不存在             | 重新整理成員列表       |
| ORG_015    | 500         | 新增成員失敗               | 添加成員操作異常       | 提供重試按鈕           |
| ORG_016    | 500         | 移除成員失敗               | 移除成員操作異常       | 提供重試按鈕           |
| ORG_017    | 400         | 應用程式已在組織中         | 嘗試添加重複應用程式   | 提示應用程式已存在     |
| ORG_018    | 404         | 查無此應用程式             | 應用程式不存在         | 重新整理應用程式列表   |
| ORG_019    | 500         | 新增應用程式失敗           | 添加應用程式操作異常   | 提供重試按鈕           |
| ORG_020    | 500         | 移除應用程式失敗           | 移除應用程式操作異常   | 提供重試按鈕           |

---

## 設備管理 (DEVICE)

| Error Code | HTTP Status | Message              | Trigger Event            | Handler Event  |
| ---------- | ----------- | -------------------- | ------------------------ | -------------- |
| DEVICE_001 | 400         | 設備名稱格式錯誤     | 名稱不符合驗證規則       | 顯示格式要求   |
| DEVICE_002 | 400         | 設備數量已達上限     | 超過註冊數量限制         | 提示刪除舊設備 |
| DEVICE_003 | 400         | 無法刪除使用中的設備 | 嘗試刪除 Normal 狀態設備 | 提示先停用設備 |
| DEVICE_004 | 409         | 設備名稱重複         | 相同成員下名稱重複       | 提示修改名稱   |

---

## Agent 平台管理 (AGENT)

| Error Code | HTTP Status | Message          | Trigger Event      | Handler Event          |
| ---------- | ----------- | ---------------- | ------------------ | ---------------------- |
| AGENT_001  | 400         | 金鑰檔案格式錯誤 | 上傳檔案格式不支援 | 上傳正確格式的金鑰檔案 |
| AGENT_002  | 413         | 檔案大小超過限制 | 金鑰檔案過大       | 選擇較小的檔案         |
| AGENT_003  | 409         | 設備已開通       | 重複開通同一設備   | 直接使用連線功能       |

---

## 連線管理 (CONN)

| Error Code | HTTP Status | Message  | Trigger Event            | Handler Event          |
| ---------- | ----------- | -------- | ------------------------ | ---------------------- |
| CONN_001   | 401         | 無效金鑰 | 上傳的金鑰是無效的       | 提示重新上傳有效金鑰   |
| CONN_002   | 403         | 無效金鑰 | 當前記錄使用的金鑰是無效 | 聯絡管理員重新開通     |
| CONN_003   | 500         | 連線失敗 | 任何原因造成無法連線     | 檢查網路環境或稍後重試 |

---

## 雙因子認證 (2FA)

| Error Code | HTTP Status | Message        | Trigger Event  | Handler Event |
| ---------- | ----------- | -------------- | -------------- | ------------- |
| 2FA_001    | 400         | 2FA 驗證碼錯誤 | 驗證碼輸入錯誤 | 提示重新輸入  |
| 2FA_002    | 400         | 2FA 狀態錯誤   | 2FA 狀態異常   | 重新設定 2FA  |

---

## 說明中心 (HELP)

| Error Code | HTTP Status | Message              | Trigger Event    | Handler Event    |
| ---------- | ----------- | -------------------- | ---------------- | ---------------- |
| HELP_001   | 400         | 客服表單驗證錯誤     | 表單欄位驗證失敗 | 顯示驗證錯誤訊息 |
| HELP_002   | 500         | 客服工單建立失敗     | 工單建立操作失敗 | 提供重試選項     |
| HELP_003   | 404         | 找不到指定的幫助文件 | 文件不存在       | 返回說明首頁     |

---

## Token 管理 (TOKEN)

| Error Code | HTTP Status | Message        | Trigger Event  | Handler Event    |
| ---------- | ----------- | -------------- | -------------- | ---------------- |
| TOKEN_001  | 403         | 重設連結已失效 | 連結過期或失效 | 重新申請重設連結 |

---

## 稽核相關 (AUDIT)

| Error Code | HTTP Status | Message            | Trigger Event | Handler Event |
| ---------- | ----------- | ------------------ | ------------- | ------------- |
| AUDIT_007  | 503         | 稽核服務暫時不可用 | 稽核服務異常  | 稍後重試      |

---

## 日誌相關 (LOG)

| Error Code | HTTP Status | Message          | Trigger Event    | Handler Event      |
| ---------- | ----------- | ---------------- | ---------------- | ------------------ |
| LOG_001    | 400         | 搜尋關鍵字過短   | 關鍵字長度不足   | 提示最小長度要求   |
| LOG_002    | 400         | 時間範圍格式錯誤 | 時間格式不正確   | 顯示正確時間格式   |
| LOG_003    | 400         | 時間範圍過大     | 查詢範圍超過限制 | 縮小查詢範圍       |
| LOG_004    | 413         | 日誌內容過大     | 單筆日誌過大     | 分批處理或限制大小 |

---

## 系統相關 (SYSTEM)

| Error Code | HTTP Status | Message      | Trigger Event    | Handler Event    |
| ---------- | ----------- | ------------ | ---------------- | ---------------- |
| SYSTEM_001 | 403         | Token 已過期 | 設定密碼連結過期 | 提供重新寄信選項 |

---

## 郵件服務 (EMAIL)

| Error Code | HTTP Status | Message      | Trigger Event | Handler Event        |
| ---------- | ----------- | ------------ | ------------- | -------------------- |
| EMAIL_001  | 500         | 郵件發送失敗 | 郵件服務異常  | 顯示郵件發送失敗提示 |

---

## 使用規範

### 1. 錯誤代碼分配原則

- **COMMON_001-099**: 通用錯誤代碼，所有模組共用
- **AUTH_001-099**: 認證相關錯誤
- **RESET_001-099**: 密碼重設相關錯誤
- **SETUP_001-099**: 帳號設定相關錯誤
- **LOGOUT_001-099**: 登出相關錯誤
- **USER_001-099**: 使用者管理相關錯誤
- **CREATE_001-099**: 使用者創建相關錯誤
- **EDIT_001-099**: 使用者編輯相關錯誤
- **VIEW_001-099**: 使用者檢視相關錯誤
- **PERM_001-099**: 權限管理相關錯誤
- **PROF_001-099**: 個人檔案相關錯誤
- **ROLE_001-099**: 角色管理相關錯誤
- **REG_001-099**: 註冊相關錯誤
- **ORG_001-099**: 組織管理相關錯誤
- **MEMBER_001-099**: 成員管理相關錯誤
- **APP_001-099**: 應用程式管理相關錯誤
- **DEVICE_001-099**: 設備管理相關錯誤
- **AGENT_001-099**: Agent 平台管理相關錯誤
- **CONN_001-099**: 連線管理相關錯誤
- **2FA_001-099**: 雙因子認證相關錯誤
- **HELP_001-099**: 說明中心相關錯誤
- **TOKEN_001-099**: Token 管理相關錯誤
- **AUDIT_001-099**: 稽核相關錯誤
- **LOG_001-099**: 日誌相關錯誤
- **SYSTEM_001-099**: 系統級錯誤
- **EMAIL_001-099**: 郵件服務相關錯誤

### 2. 新增錯誤代碼流程

1. 確認錯誤是否可使用現有的通用錯誤代碼
2. 若需新增特定模組錯誤，按照模組前綴命名
3. 檢查編號是否與現有錯誤衝突
4. 更新本文件並通知相關開發團隊
5. 在前端實作對應的錯誤處理邏輯

### 3. 錯誤處理最佳實踐

- **一致性**: 相同類型的錯誤使用相同的錯誤代碼
- **用戶友好**: 錯誤訊息應清楚說明問題並提供解決建議
- **可操作性**: Handler Event 應提供具體的用戶操作指引
- **可追蹤性**: 錯誤代碼應便於日誌記錄和問題排查

## 相關文件

- [登入功能規格](./features/login.md)
- [密碼重設功能規格](./features/forgot-password.md)
- [使用者管理功能規格](./features/user.md)
- [角色管理功能規格](./features/role.md)
- [權限管理功能規格](./features/permission.md)
- [個人檔案功能規格](./features/profile.md)
- [前台功能規格](./features/agent.md)
- [成員管理功能規格](./features/member.md)
- [應用程式管理功能規格](./features/application.md)
- [組織管理功能規格](./features/organization.md)
- [日誌管理功能規格](./features/log.md)
- [稽核管理功能規格](./features/audit.md)
